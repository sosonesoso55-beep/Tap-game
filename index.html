<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Anime Tap</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  user-select:none;
  font-family:Arial, sans-serif;
}

body{
  height:100vh;
  background:radial-gradient(circle at top,#5b0099,#000);
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:space-between;
  overflow:hidden;
}

/* HEADER */
header{
  margin-top:15px;
  text-align:center;
}

#score{
  font-size:26px;
  margin-top:8px;
  color:#ffd6ff;
  text-shadow:0 0 15px #ff66ff;
}

/* TAP BUTTON */
#tap{
  width:260px;
  height:260px;
  border-radius:50%;
  background:radial-gradient(circle,#ff00ff,#1a0029);
  box-shadow:0 0 50px #ff00ff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:34px;
  animation:pulse 2s infinite;
  position:relative;
}

#tap:active{
  transform:scale(.92);
}

/* PULSE */
@keyframes pulse{
  0%{box-shadow:0 0 30px #ff00ff;}
  50%{box-shadow:0 0 70px #ff66ff;}
  100%{box-shadow:0 0 30px #ff00ff;}
}

/* FLOAT TEXT */
.float{
  position:absolute;
  color:#fff;
  font-size:22px;
  animation:floatUp 1s forwards;
  pointer-events:none;
}

@keyframes floatUp{
  0%{opacity:1; transform:translateY(0);}
  100%{opacity:0; transform:translateY(-60px);}
}

/* MENU */
.menu{
  width:100%;
  display:flex;
  justify-content:space-around;
  background:rgba(0,0,0,.75);
  padding:12px 0;
}

.menu button{
  background:none;
  border:none;
  color:#ffd6ff;
  font-size:13px;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  animation:fadeIn .3s;
}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

.modal-box{
  width:85%;
  background:#1a0029;
  border:2px solid #ff00ff;
  border-radius:18px;
  padding:20px;
  text-align:center;
  box-shadow:0 0 35px #ff00ff;
  animation:scaleIn .25s;
}

@keyframes scaleIn{
  from{transform:scale(.8)}
  to{transform:scale(1)}
}

.modal-box h3{
  margin-bottom:12px;
  color:#ff9dff;
}

.modal-box p{
  margin:6px 0;
}

.modal-box button{
  margin-top:10px;
  padding:10px 16px;
  border:none;
  border-radius:12px;
  background:#ff00ff;
  color:white;
}
</style>
</head>

<body>

<header>
  <h2>Anime Tap</h2>
  <div id="score">–û—á–∫–∏: 0</div>
</header>

<div id="tap">TAP</div>

<div class="menu">
  <button onclick="openMenu('profile')">üë§</button>
  <button onclick="openMenu('shop')">üõí</button>
  <button onclick="openMenu('top')">üèÜ</button>
  <button onclick="openMenu('settings')">‚öô</button>
</div>

<div class="modal" id="modal">
  <div class="modal-box" id="modalBox"></div>
</div>

<script>
let data = JSON.parse(localStorage.getItem("animeTap")) || {
  score:0,
  power:1,
  taps:0,
  leaderboard:[]
};

const scoreEl = document.getElementById("score");
const tap = document.getElementById("tap");

function update(){
  scoreEl.innerText = "–û—á–∫–∏: " + data.score;
  localStorage.setItem("animeTap", JSON.stringify(data));
}

tap.onclick = (e)=>{
  data.score += data.power;
  data.taps++;
  update();

  if(navigator.vibrate) navigator.vibrate(10);

  const plus = document.createElement("div");
  plus.className = "float";
  plus.innerText = "+"+data.power;
  plus.style.left = (e.offsetX-10)+"px";
  plus.style.top = (e.offsetY-10)+"px";
  tap.appendChild(plus);
  setTimeout(()=>plus.remove(),1000);
};

function openMenu(type){
  const box = document.getElementById("modalBox");
  const modal = document.getElementById("modal");

  if(type==="profile"){
    box.innerHTML = `
      <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
      <p>–û—á–∫–∏: ${data.score}</p>
      <p>–°–∏–ª–∞: x${data.power}</p>
      <p>–¢–∞–ø–æ–≤: ${data.taps}</p>
      <button onclick="closeMenu()">–û–∫</button>
    `;
  }

  if(type==="shop"){
    box.innerHTML = `
      <h3>üõí –ú–∞–≥–∞–∑–∏–Ω</h3>
      <p>x2 ‚Äî 500</p>
      <button onclick="buy(2,500)">–ö—É–ø–∏—Ç—å</button>
      <p>x5 ‚Äî 3000</p>
      <button onclick="buy(5,3000)">–ö—É–ø–∏—Ç—å</button>
      <button onclick="closeMenu()">–ó–∞–∫—Ä—ã—Ç—å</button>
    `;
  }

  if(type==="top"){
    saveTop();
    box.innerHTML = `
      <h3>üèÜ –¢–û–ü</h3>
      ${data.leaderboard.map((s,i)=>`<p>${i+1}. ${s}</p>`).join("")}
      <button onclick="closeMenu()">–û–∫</button>
    `;
  }

  if(type==="settings"){
    box.innerHTML = `
      <h3>‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
      <button onclick="resetGame()">–°–±—Ä–æ—Å</button>
      <button onclick="closeMenu()">–ó–∞–∫—Ä—ã—Ç—å</button>
    `;
  }

  modal.style.display="flex";
}

function closeMenu(){
  document.getElementById("modal").style.display="none";
}

function buy(mult,price){
  if(data.score>=price){
    data.score-=price;
    data.power=mult;
    update();
    closeMenu();
  } else alert("–ú–∞–ª–æ –æ—á–∫–æ–≤");
}

function saveTop(){
  data.leaderboard.push(data.score);
  data.leaderboard=[...new Set(data.leaderboard)]
    .sort((a,b)=>b-a).slice(0,5);
  update();
}

function resetGame(){
  localStorage.clear();
  location.reload();
}

update();
</script>

</body>
</html>
