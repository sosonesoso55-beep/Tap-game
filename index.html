<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AniTap</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-family: Arial, sans-serif;
}

.app {
  width: 320px;
  height: 540px;
  background: rgba(0,0,0,0.65);
  border-radius: 20px;
  overflow: hidden;
  position: relative;
}

.header {
  text-align: center;
  padding: 15px;
  font-size: 22px;
  font-weight: bold;
}

.page {
  display: none;
  height: calc(100% - 120px);
  padding: 20px;
}

.page.active {
  display: block;
}

/* TAP */
.score {
  text-align: center;
  font-size: 20px;
}

.tap {
  width: 200px;
  height: 200px;
  margin: 15px auto;
  border-radius: 50%;
  background: radial-gradient(circle, #ff416c, #ff4b2b);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.tap:active {
  transform: scale(0.9);
}

.mult {
  text-align: center;
  font-size: 14px;
  opacity: 0.8;
}

/* SHOP */
.shop-item {
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 10px;
}

.shop-item button {
  width: 100%;
  margin-top: 8px;
  padding: 8px;
  border-radius: 10px;
  border: none;
}

/* MENU */
.menu {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 60px;
  background: rgba(0,0,0,0.85);
  display: flex;
}

.menu button {
  flex: 1;
  background: none;
  border: none;
  color: white;
}

.menu button.active {
  background: rgba(255,255,255,0.15);
}
</style>
</head>

<body>

<div class="app">
  <div class="header">ðŸ”¥ AniTap ðŸ”¥</div>

  <!-- TAP -->
  <div class="page active" id="tapPage">
    <div class="score">ðŸ’° ÐžÑ‡ÐºÐ¸: <span id="score">0</span></div>
    <div class="tap" onclick="tap()">TAP</div>
    <div class="mult">ÐœÐ½Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒ: x<span id="multiplier">1</span></div>
  </div>

  <!-- SHOP -->
  <div class="page" id="shopPage">
    <div class="shop-item">
      âš¡ x2<br>Ð¦ÐµÐ½Ð°: 100
      <button onclick="buy(2,100)">ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ</button>
    </div>
    <div class="shop-item">
      ðŸš€ x5<br>Ð¦ÐµÐ½Ð°: 500
      <button onclick="buy(5,500)">ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ</button>
    </div>
  </div>

  <!-- PROFILE -->
  <div class="page" id="profilePage">
    ðŸ‘¤ ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ<br><br>
    ÐžÑ‡ÐºÐ¸: <span id="pScore">0</span><br>
    ÐœÐ½Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒ: x<span id="pMult">1</span>
  </div>

  <!-- MENU -->
  <div class="menu">
    <button class="active" id="btnTap" onclick="openPage('tap')">ðŸ”¥ Tap</button>
    <button id="btnShop" onclick="openPage('shop')">ðŸ›’ Shop</button>
    <button id="btnProfile" onclick="openPage('profile')">ðŸ‘¤ Profile</button>
  </div>
</div>

<script>
let score = parseInt(localStorage.getItem("score")) || 0;
let mult = parseInt(localStorage.getItem("mult")) || 1;

const scoreEl = document.getElementById("score");
const multEl = document.getElementById("multiplier");
const pScoreEl = document.getElementById("pScore");
const pMultEl = document.getElementById("pMult");

updateUI();

function tap() {
  score += mult;
  save();
}

function buy(newMult, price) {
  if (score < price) {
    alert("âŒ ÐÐµ Ñ…Ð²Ð°Ñ‚Ð°ÐµÑ‚ Ð¾Ñ‡ÐºÐ¾Ð²");
    return;
  }
  if (newMult <= mult) {
    alert("âœ… Ð£Ð¶Ðµ ÐºÑƒÐ¿Ð»ÐµÐ½Ð¾");
    return;
  }
  score -= price;
  mult = newMult;
  save();
}

function save() {
  localStorage.setItem("score", score);
  localStorage.setItem("mult", mult);
  updateUI();
}

function updateUI() {
  scoreEl.textContent = score;
  multEl.textContent = mult;
  pScoreEl.textContent = score;
  pMultEl.textContent = mult;
}

function openPage(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.menu button').forEach(b => b.classList.remove('active'));

  if (page === 'tap') {
    tapPage.classList.add('active');
    btnTap.classList.add('active');
  }
  if (page === 'shop') {
    shopPage.classList.add('active');
    btnShop.classList.add('active');
  }
  if (page === 'profile') {
    profilePage.classList.add('active');
    btnProfile.classList.add('active');
  }
}

if (window.Telegram && Telegram.WebApp) {
  Telegram.WebApp.expand();
}
</script>

</body>
</html>
