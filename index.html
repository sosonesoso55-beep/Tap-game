<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Tap</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{
background:radial-gradient(circle,#0f0f2d,#000);
color:#fff;
height:100vh;
overflow:hidden;
}

#app{
display:flex;
flex-direction:column;
align-items:center;
justify-content:space-between;
height:100%;
padding:10px;
}

#profile{
width:100%;
display:flex;
align-items:center;
gap:10px;
background:rgba(255,255,255,.08);
padding:10px;
border-radius:16px;
}

#profile img{
width:60px;
height:60px;
border-radius:50%;
border:2px solid #ff69b4;
}

#stats{
flex:1;
}

#score{
font-size:22px;
font-weight:bold;
}

#tap-zone{
flex:1;
display:flex;
align-items:center;
justify-content:center;
}

#tap-btn{
width:260px;
height:260px;
border-radius:50%;
background:url("girl.png") center/cover;
border:none;
box-shadow:0 0 40px #ff69b4;
animation:pulse 2s infinite;
}

@keyframes pulse{
0%{transform:scale(1)}
50%{transform:scale(1.05)}
100%{transform:scale(1)}
}

#menu{
width:100%;
display:flex;
justify-content:space-around;
background:rgba(0,0,0,.5);
padding:10px;
border-radius:20px;
}

button{
background:linear-gradient(135deg,#ff69b4,#ff1493);
border:none;
border-radius:14px;
color:#fff;
padding:10px 14px;
font-size:14px;
}
</style>
</head>

<body>
<div id="app">

<div id="profile">
<img src="girl.png">
<div id="stats">
<div>ID: <span id="uid">...</span></div>
<div id="score">0 ‚≠ê</div>
</div>
</div>

<div id="tap-zone">
<button id="tap-btn"></button>
</div>

<div id="menu">
<button onclick="openShop()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="openLB()">üèÜ –¢–æ–ø</button>
<button onclick="openSettings()">‚öôÔ∏è</button>
</div>

</div>

<audio id="tapSound" src="tap.mp3"></audio>
<audio id="music" src="music.mp3" loop></audio>

<script>
const tg = window.Telegram?.WebApp;
tg?.expand();

const SERVER = "https://YOUR_RENDER_URL"; // ‚Üê –ó–ê–ú–ï–ù–ò

const uid = tg?.initDataUnsafe?.user?.id || localStorage.uid || (localStorage.uid=Math.random().toString(36).slice(2));
document.getElementById("uid").innerText = uid;

let score = 0;
let power = 1;

const tapSound = document.getElementById("tapSound");
const music = document.getElementById("music");
music.volume = 0.3;
music.play();

async function sync(){
const r = await fetch(SERVER+"/state?id="+uid);
const d = await r.json();
score = d.score;
power = d.power;
render();
}

async function tap(){
tapSound.currentTime=0;
tapSound.play();
const r = await fetch(SERVER+"/tap",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({id:uid})
});
const d = await r.json();
score=d.score;
power=d.power;
render();
}

function render(){
document.getElementById("score").innerText = score+" ‚≠ê";
}

document.getElementById("tap-btn").onclick = tap;

function openShop(){
alert("–ú–∞–≥–∞–∑–∏–Ω:\nx2 ‚Äî 500\nx5 ‚Äî 3000");
}

function openLB(){
fetch(SERVER+"/leaderboard")
.then(r=>r.json())
.then(d=>{
alert("–¢–û–ü:\n"+d.map((u,i)=>`${i+1}. ${u.id} ‚Äî ${u.score}`).join("\n"))
});
}

function openSettings(){
alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ üëÄ");
}

sync();
</script>
</body>
</html>
